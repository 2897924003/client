var O=Object.defineProperty;var v=(e,r)=>()=>(e&&(r=e(e=0)),r);var w=(e,r)=>{for(var t in r)O(e,t,{get:r[t],enumerable:!0})};var E={};w(E,{default:()=>X});import{ssrMiddleware as K}from"quasar/wrappers/index.mjs";import{createProxyMiddleware as W}from"http-proxy-middleware";var X,$=v(()=>{X=K(async({app:e})=>{e.use((r,t,o)=>{console.log("============++++++++++++="),console.log(`Request URL: ${r.url}`),console.log("==========+++++++++++++==="),o()}),e.use("/api",W({target:"https://test.opensun.asia/api",changeOrigin:!0}))})});var T={};w(T,{default:()=>Z});import{ssrMiddleware as Y}from"quasar/wrappers/index.mjs";var Z,b=v(()=>{Z=Y(({app:e,resolve:r,render:t,serve:o})=>{e.get(r.urlPath("*"),(a,s)=>{s.setHeader("Content-Type","text/html"),console.log("==========================="),console.log("req",a.url),console.log("==========================="),t({req:a,res:s}).then(n=>{s.send(n)}).catch(n=>{n.url?n.code?s.redirect(n.code,n.url):s.redirect(n.url):n.code===404?s.status(404).send("404 | Page Not Found"):s.status(500).send("500 | Internal Server Error")})})})});import{join as l,basename as x}from"node:path";import{readFileSync as C}from"node:fs";import{fileURLToPath as ee}from"node:url";import{renderToString as re}from"vue/server-renderer";import te from"serialize-javascript";import oe from"./render-template.js";import ne from"./server/server-entry.js";import R from"express";import L from"compression";import{ssrClose as D,ssrCreate as I,ssrListen as N,ssrServeStaticContent as U,ssrRenderPreloadTag as q}from"quasar/wrappers/index.mjs";var y=I(()=>{let e=R();return e.disable("x-powered-by"),e.use(L()),e}),P=N(async({app:e,devHttpsApp:r,port:t,isReady:o})=>(await o(),(r||e).listen(t,()=>{console.log("Server listening at port "+t)}))),he=D(({listenResult:e})=>e.close()),A=1e3*60*60*24*30,S=U((e,r)=>R.static(e,{maxAge:A,...r})),G=/\.js$/,H=/\.css$/,J=/\.woff$/,V=/\.woff2$/,z=/\.gif$/,B=/\.jpe?g$/,Q=/\.png$/,p=q(e=>G.test(e)===!0?`<link rel="modulepreload" href="${e}" crossorigin>`:H.test(e)===!0?`<link rel="stylesheet" href="${e}" crossorigin>`:J.test(e)===!0?`<link rel="preload" href="${e}" as="font" type="font/woff" crossorigin>`:V.test(e)===!0?`<link rel="preload" href="${e}" as="font" type="font/woff2" crossorigin>`:z.test(e)===!0?`<link rel="preload" href="${e}" as="image" type="image/gif" crossorigin>`:B.test(e)===!0?`<link rel="preload" href="${e}" as="image" type="image/jpeg" crossorigin>`:Q.test(e)===!0?`<link rel="preload" href="${e}" as="image" type="image/png" crossorigin>`:"");function f(e){return Promise.all([Promise.resolve().then(()=>($(),E)),Promise.resolve().then(()=>(b(),T))]).then(async r=>{let t=r.map(o=>o.default);for(let o=0;o<t.length;o++)try{await t[o](e)}catch(a){console.error("[Quasar SSR] middleware error:",a);return}})}var se=process.env.PORT||9100,ae=/\/\//g,i="/",j=i==="/"?e=>e||"/":e=>e?(i+e).replace(ae,"/"):i,c=ee(new URL(".",import.meta.url)),_=l(c,"client"),m=JSON.parse(C(l(c,"./quasar.manifest.json"),"utf-8"));function k(){return l(_,...arguments)}function ie(e,r){let t="",o=new Set;return e.forEach(a=>{let s=m[a];s!==void 0&&s.forEach(n=>{if(o.has(n)===!0)return;o.add(n);let h=x(n);if(m[h]!==void 0)for(let u of m[h])o.has(u)===!1&&(t+=p(u,r),o.add(u));t+=p(n,r)})}),t}var ce="document.currentScript.remove()";function le(e){let r=e.nonce!==void 0?' nonce="'+e.nonce+'"':"",t=te(e.state,{isJSON:!0});return"<script"+r+">window.__INITIAL_STATE__="+t+";"+ce+"</script>"}async function de(e){let r=[];Object.assign(e,{_meta:{},onRendered:t=>{r.push(t)}});try{let t=await ne(e),o=await re(t,e);return r.forEach(a=>{a()}),typeof e.rendered=="function"&&e.rendered(),e._meta.runtimePageContent=o,e.state!==void 0&&(e._meta.headTags=le(e)+e._meta.headTags),e._meta.endingHeadTags+=ie(e.modules,{ssrContext:e}),oe(e)}catch(t){throw t}}var F=(e,r={})=>S(k(e),r),d={port:se,resolve:{urlPath:j,root(){return l(c,...arguments)},public:k},publicPath:i,folders:{root:c,public:_},render:e=>de(e),serve:{static:F}},g=y(d);d.app=g;g.use(j("/"),F("."));var M=()=>f(d),ue=(e,r,t)=>M().then(()=>g(e,r,t)),Me=P({isReady:M,ssrHandler:ue,...d});export{Me as default};
